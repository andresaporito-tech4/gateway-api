_format_version: "3.0"
_transform: true

# (opcional) plugins globais Ãºteis
plugins:
  - name: cors
    config:
      origins: ["*"]
      methods: ["GET","POST","PUT","PATCH","DELETE","OPTIONS"]
      headers: ["Accept","Authorization","Content-Type","Origin","X-Request-Id"]
      exposed_headers: ["X-Request-Id"]
      credentials: false
      max_age: 3600

  - name: request-transformer
    config:
      add:
        headers:
          - "X-Request-Source:tech3-kong"

services:
  - name: users-api
    protocol: https
    host: tech3-users-api-ewc6gegzeff7aydr.canadacentral-01.azurewebsites.net
    port: 443
    path: /
    routes:
      - name: users-route
        paths: ["/users"]
        strip_path: true
        preserve_host: false
        protocols: ["http","https"]
        methods: ["GET","POST","PUT","PATCH","DELETE","OPTIONS"]

  - name: games-api
    protocol: https
    host: tech3-games-api-gnh8bghphwdracap.canadacentral-01.azurewebsites.net
    port: 443
    path: /
    routes:
      - name: games-route
        paths: ["/games"]
        strip_path: true
        preserve_host: false
        protocols: ["http","https"]
        methods: ["GET","POST","PUT","PATCH","DELETE","OPTIONS"]

  - name: payments-api
    protocol: https
    host: tech3-payments-api-hcdsc3gdargwchf0.canadacentral-01.azurewebsites.net
    port: 443
    path: /
    routes:
      - name: payments-route
        paths: ["/payments"]
        strip_path: true
        preserve_host: false
        protocols: ["http","https"]
        methods: ["GET","POST","PUT","PATCH","DELETE","OPTIONS"]
